<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"	
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
        <title>Code Pirates - Cart View</title>
        <style type="text/css">
            .ui-widget {
                font-size: 90%;
            }
        </style>
    </h:head>
    <h:body>

        <p:growl id="growl" showDetail="true" sticky="true" />  

        <div align="center">
            <h1>Cart Items</h1></div>
        <h:form id="checkoutForm">

            <p:outputPanel id="checkout">

                <p:dataTable id="checkoutId" var="product" value="#{cartBean.products}"
                             editable="false" widgetVar="documentTable">

                    <p:column headerText="Product Id" style="width:10%">
                        <h:outputText value="#{product.productId}" title="Id" />
                    </p:column>

                    <p:column headerText="Name" style="width:10%">
                        <h:outputText value="#{product.productName}" title="Name" />
                    </p:column>

                    <p:column headerText="Image" style="width:20%">
                        <p:graphicImage value="#{productBean.productImage}">
                            <f:param name="pid" value="#{product.productId}" />
                        </p:graphicImage>
                    </p:column>



                    <p:column headerText="Quantity" style="width:10%">
                        <p:spinner id="quantity" value="#{product.quantity}" 
                                   valueChangeListener="#{cartBean.cartQuantity}"
                                   min="0" size="2"/> 

                        <br></br>
                        <h:commandLink value="Update Qty" 
                                       action="#{cartBean.updateQuantity(product)}"/> 
                    </p:column>

                    <p:column headerText="Total Price" style="width:10%">
                        <h:outputText value="#{product.totalPrice}" title="Total Price" />
                    </p:column>



                    <p:column headerText="Remove Action" style="width:10%">
                        <h:commandLink value="Remove" 
                                       action="#{cartBean.removeFromCart(product)}"/>   
                    </p:column>

                </p:dataTable>
            </p:outputPanel>

        </h:form>

    </h:body>
</html>